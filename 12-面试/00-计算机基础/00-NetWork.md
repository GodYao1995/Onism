[TOC]

### 计算机网络基础

协议是水平的, 服务是垂直的

#### 网络层次划分

##### OSI七层

1.  物理层
2.  数据链路层
3.  网络层
4.  传输层
5.  会话层
6.  表示层
7.  应用层

##### TCP/IP四层

1.  网络接口层
2.  网际层
3.  运输层
4.  应用层

##### TCP/IP五层

1.  物理层：中继器、集线器
2.  数据链路层：以太网协议、网卡、网桥、交换机
3.  网络层：IP、ARP、RARP、路由器、ICMP、防火墙
4.  运输层：TCP、UDP
5.  应用层：FTP、HTTP、DNS、SMTP

##### 层作用

1.  物理层
    *   屏蔽物理特性, 为上层传输提供物理媒介
    *   设备：中继器、集线器
2.  数据链路层
    *   数据成帧, 提供可靠的数据传输
    *   以太网协议
    *   设备：网桥、交换机
3.  网络层
    *   路径选择、路由和逻辑寻址, 最后传输到目标节点
    *   IP协议、ARP协议、RARP协议
    *   设备：路由器
4.  传输层
    *   提供端到端的可靠传输、流量控制、差错控制, 最后传输到端口
    *   TCP、UDP协议
    *   设备：网关

#### IP地址

##### 形式

1.  32位二进制数值, 用于TCP/IP协议中, 标记网络中的一台主机

~~~
00000000.00000000.00000000.00000000 ~ 11111111.11111111.11111111.11111111
~~~

2.  通常使用点分十进制表示

~~~
0.0.0.0 ~ 255.255.255.255
~~~

3.  组成

~~~
网络号【包括子网号】 + 主机号
~~~

##### 分类

| 分类 |            范围             |     默认掩码     |             说明              |
| :--: | :-------------------------: | :--------------: | :---------------------------: |
| A类  |  0.0.0.0 ~ 126.255.255.255  |   255.0.0.0/8    |     第一个字节作为网络号      |
| B类  | 128.0.0.0 ~ 191.255.255.255 |  255.255.0.0/16  |     前两个字节作为网络号      |
| C类  | 192.0.0.0 ~ 223.255.255.255 | 255.255.255.0/16 |     前三个字节作为网络号      |
| D类  | 224.0.0.0 ~ 239.255.255.255 |                  | 作为组播地址（一对多的通信）  |
| E类  | 240.0.0.0 ~ 255.255.255.255 |                  | E类地址为保留地址, 供以后使用 |

说明

1.  IP地址由网络号 + 主机号组成
2.  **网络地址**：主机号全是0的地址, 处于那个网络
3.  **广播地址**：主机号全是1的地址
4.  255.255.255.255
    *   受限的广播地址
    *   只能用于本地网络, 路由器不会转发这类地址
5.  127.0.0.1 本地回环地址, 一般表示本机地址
6.  ABC私有地址, 不会在全球使用, 只具有本地意义
    *   A  10.0.0.0 ～ 10.255.255.255.255
    *   B   172.16.0.0 ~ 172.31.255.255
    *   192.168.0.0 ~ 192.168.255.255
7.  网关：一个IP网络通向另一个IP网络

##### 子网掩码

作用

1. 标示两个IP地址是否属于一个子网
2. IP地址和 子网掩码做 与运算 得到网络号

计算子网掩码

1.  子网划分个数 N
2.  将 N 化为二进制, 得出二进制位数 K
3.  取得该类IP地址的子网掩码, 将其主机地址部分的的前K位置1
    *   255.255.0.0  ——> 主机位置K位置5  【假设B类IP地址】
    *   255.255.248.0

![IPNetwork](./images/IPNetwork.svg)

#### ARP/RARP

**作用**

1.  地址解析协议
2.  ARP缓冲区建立 IP 和 MAC地址对应表
3.  主机发送信息时将包含目标IP地址的ARP请求广播到网络上的所有主机, 并单播接收返回消息, 以此确定目标的MAC物理地址
4.  RARP的目的相反, 通过MAC地址得出IP地址

#### 路由选择协议

1. RIP贝尔曼福特算法

    选择路由的标准是跳数, 大于15则会丢弃数据包

2. OSPF开放式最短路径优先

    选择路由的度量标准是带宽, 延迟
