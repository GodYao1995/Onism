[TOC]



# 基本命令

## 基础数据结构

### String

注意: String的value可以使字符串、数字类型或者二进制【所以增长减少类必须是数字类型】

|           命令           | 说明                            | 时间复杂度 |
| :----------------------: | ------------------------------- | :--------: |
|         **常用**         |                                 |            |
|         get key          | 获取key                         |    O(1)    |
|      set key value       | 设置key                         |    O(!)    |
|         del key          | 删除key                         |    O(1)    |
|         incr key         | 增加1                           |    O(1)    |
|         decr key         | 减少1                           |    O(1)    |
|   incrby key increment   | 增长increment                   |    O(1)    |
|   decrby key increment   | 减少increment                   |    O(1)    |
|         **特殊**         |                                 |            |
|    set  key value xx     | xx是固定的key存在才设置         |    O(1)    |
|     setnx key vlaue      | key不存在才设置                 |    O(1)    |
|         **耗时**         |                                 |            |
|      mget key1 key2      | 批量获取key                     |    O(n)    |
|     mset k1 v1 k2 v2     | 批量设置key                     |    O(n)    |
|         **其他**         |                                 |            |
|   getset key newvalue    | 获取key的oldvalue，设置newvalue |    O(1)    |
|     append key value     | 追加到key后面                   |    O(!)    |
|        strlen key        | 返回key的长度                   |    O(!)    |
|   incrbyfloat key 1.2    | 加上浮点，不精确                |    O(!)    |
|  getrange key start end  | 获取切片                        |    O(!)    |
| getrange key index value | 设置指定位置                    |    O(!)    |
|                          |                                 |            |

### Hash

|               命令               |            说明             | 时间复杂度 |
| :------------------------------: | :-------------------------: | :--------: |
|             **常用**             |                             |            |
|       hset key field value       | 设置key对应字段filed的value |    O(1)    |
|          hget key field          | 获取key对应字段filed的value |    O(1)    |
|      hmset key f1 v1 f2 v2       |        批量设置filed        |    O(!)    |
|             **耗时**             |                             |            |
|           hgetall key            |  获取key全部的filed-value   |    O(n)    |
|            hkeys key             |       获取所有的field       |    O(n)    |
|            hvals key             |     获取key的所有value      |    O(n)    |
|             **特殊**             |                             |            |
|      hsetnx key filed value      |  设置未存在的field的value   |    O(!)    |
|   hincrby key field increment    |        增长increment        |    O(1)    |
| hincrbyfloat key field increment |      增长浮点increment      |    O(!)    |



### List

|                  命令                   |                   说明                    |  时间复杂度  |
| :-------------------------------------: | :---------------------------------------: | :----------: |
|                 **栈**                  |               rpush + rpop                | lpush + lpop |
|                **队列**                 |               rpush + lpop                | lpush + rpop |
|           rpush key v1 v2 v3            |                 右边插入                  |     O(n)     |
|           lpush key v1 v2 v3            |                 左边插入                  |     O(n)     |
|                rpop key                 |                右边弹出1个                |     O(!)     |
|                lpop key                 |                左边弹出1个                |     O(!)     |
|              **阻塞弹出**               |                                           |              |
|            blpop key timeout            |             阻塞直到过期时间              |     O(1)     |
|            brpop key timeou             |             阻塞直到过期时间              |     O(1)     |
|                **其他**                 |                                           |              |
| linsert key after/before value newvalue |              指定值前后插入               |     O(n)     |
|          lrem key count value           | count指定数目方向【正左负右】 value指定值 |     O(n)     |
|                                         |        count = 0删除所有相同value         |              |
|            lindex key index             |               获取指定下标                |     O(1)     |
|                llen key                 |                 获取长度                  |     O(1)     |
|         lset key index newvalue         |               设置下标新值                |     O(1)     |
|                **范围**                 |                                           |              |
|           ltrim key srtar end           |          0开始，减去范围外的数据          |     O(n)     |
|          lrange key start end           |             获取范围内的数据              |     O(n)     |



### Set

|             命令             |            说明             | 时间复杂度 |
| :--------------------------: | :-------------------------: | :--------: |
|        **集合内操作**        |                             |            |
|        sadd key item         |            添加             |    O(1)    |
|        srem key item         |            删除             |    O(1)    |
|          scard key           |        计算集合大小         |    O(1)    |
|      sismember key item      |      判断是否在集合中       |    O(1)    |
|    srandmember key count     | 从集合中随机挑 count 个元素 |    O(1)    |
|           spop key           |        随机取出一个         |    O(1)    |
|         smembers key         |          获取所有           |    O(1)    |
|        **集合间操作**        |                             |            |
|       sdiff key1 key2        |            差集             |    O(1)    |
|       sinter key1 key2       |            交集             |    O(1)    |
|       sunion key1 key2       |            并集             |    O(1)    |
| sdiffstore newkey key1 key2  |   差集结果存储到新的集合    |    O(1)    |
| sinterstore newkey key1 key2 |   交集结果存储到新的集合    |    O(1)    |
| sunionstore newkey key1 key2 |   并集结果存储到新的集合    |    O(1)    |
|                              |                             |            |

### zset

|                  命令                  |           说明            | 时间复杂度  |
| :------------------------------------: | :-----------------------: | :---------: |
|         zadd key score member          |           添加            |   O(logn)   |
|       zrem key member1, member2        |      按照member删除       |    O(1)     |
|            zscore key value            |     返回member的分数      |    O(1)     |
|     zincrby key increScore member      |     增加member的分数      |    O(1)     |
|               zcard key                |     返回元素的总个数      |    O(1)     |
|                **排名**                |                           |             |
|            zrank key member            | 返回元素的排名[正序0开始] |             |
|          zrevrank key member           |   返回元素的排名[倒序]    |    O(1)     |
|     zremrangebyrank key start end      | 删除指定排名内的升序元素  | O{logn + m} |
|              **索引范围**              |                           |             |
|          zrange key start end          |   返回区间的成员[正序]    | O{logn + m} |
|        zrevrange key start end         |   返回区间的成员[倒序]    | O{logn + m} |
|                **分数**                |                           |             |
|   zrangebyscore keyminScore maxScore   |       返回分数区间        | O{logn + m} |
|      zcount key minScore maxScore      |     返回分数区间个数      | O{logn + m} |
| zremrangebyscore key minScore maxScore | 删除指定分数内的升序元素  | O{logn + m} |
|             **集合间操作**             |                           |             |
|    zinterstore newkey num key1 key2    | key1 key2 交集存入newkey  |             |
|    zunionstore newkey num key1 key2    | key1 key2 并集存入newkey  |             |



## 高级数据结构

### BitMap

|             命令              |                     说明                      | 时间复杂度 |
| :---------------------------: | :-------------------------------------------: | :--------: |
|     setbit key offset 0/1     |             给位图指定索引设置值              |    O(1)    |
|       getbit key offset       |            获取位图指定offset的值             |    O(1)    |
|    bitcount key start end     |          获取位图指定区间值为1的个数          |    O(1)    |
| bitop and newbitmap key1 key2 | key1和 key2 两个bitmap做位操作存储在newbitmap |            |
| bitop or newbitmap key1 key2  |                                               |            |
| bitop not newbitmap key1 key2 |                                               |            |
| bitop xor newbitmap key1 key2 |                                               |            |
|    bitpos key 1 start end     |            指定区间值为1or0的数目             |            |



### Geo

|                             命令                             | 说明               |
| :----------------------------------------------------------: | ------------------ |
|             geoadd key longitude latitude member             | 给member设置经纬度 |
|                      geopos key member                       | 获取member经纬度   |
|                      geodist key m1 m2                       | 获取m1 m2距离      |
| georadius key longitude latitude num1 m/km/ft/mi count num2 asc |                    |
|    获取在经纬度  num距离 数量为 num2的地理位置，升序排列     |                    |
|                                                              |                    |
|                                                              |                    |
|                                                              |                    |
|                                                              |                    |

