[TOC]

# 第七章 HTTPS

## 7.1 HTTP缺点

1.  通信使用的是明文传输
2.  不验证对方身份
    *   服务器伪装
    *   客户端伪装
3.  无法验证报文的完整性，可能被篡改

如何解决？

1.  加密

    *   通信加密
        *   SSL或者TSL加密建立安全通信线路
        *   SSL + HTTP 然后在通信，这就是HTTPS

    *   内容加密
        *   将报文内容加密

2.  验证对方身份解决

    *   证书
    *   CA是信任的第三方机构

3.  完整性解决

    *   中间人截获，篡改
    *   MD5等校验
    *   数字签名

## 7.2 HTTP + 加密 + 认证 + 完整性保护 = HTTPS

具有加密和认证机制、完整性保护的的HTTP协议称为HTTPS

1.  说明
    *   HTTPS不是一种新的协议，只是HTTP通信接口部分采用SSL和TSL
    *   通常HTTP先和SSL通信，然后SSL再和TCP通信
    *   SSL是独立的协议
2.  对称加密方式【共享密钥加密】
    *   加密解密使用同一套密钥
    *   缺点：无法安全的将密钥传递给对方
3.  非对称加密【公开密钥加密】
    *   加密采用公钥，解密采用对应的私钥
    *   发送密文的一方使用对方的公开密钥进行加密处理，对方收到被加密的信息后，再使用自己的私有密钥进行解密
    *   缺点：通信慢效率较低，加解密消耗CPU硬件资源，需要购买证书
4.  **HTTPS采用混合加密**
    *   交换密钥的阶段采用非对称加密，将对称加密的密钥安全的传输给对方
    *   通信阶段采用对称加密，对称加解密的效率高

5.  如何证明用于非对称加密的公钥是服务器签发的？数字证书认证机构解决这个问题

    **证书的一个作用是用来证明作为通信一方的服务器是否规范，另外一个作用是可确认对方服务器背后运营的企业是否真实存在**

    *   客户端
        *   浏览器已经内置数字证书机构的公钥
    *   服务器
        *   数字证书机构用证书私钥 加密服务器公钥成为数字签名，数字证书绑定服务器公钥为公钥证书 发送给浏览器
        *   浏览器得到后，利用浏览器内置的数字证书机构提供的公钥**验证服务器的公钥证书**,得到服务器公钥
    *   此时已经将用于非对称加密的公钥安全的传输给了客户端
    *   后面就是使用非对称密钥传输   对称密钥 
    *   最后采用对称密钥通信

6.  总结
    *   利用数字证书机构：传输非对称加密的公钥，
        *   服务器有效性
        *   企业有效性
    *   非对称加密来传输  对称加密密钥
    *   对称加密用来通信
7.  选择
    *   HTTPS，花钱，通信较HTTP满，消耗资源
    *   HTTP安全